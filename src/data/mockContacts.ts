import { Contact, FREQUENCY_OPTIONS, RelationshipLayer, ContactFrequency } from '@/types/contact';

// Cartoon-style avatar URLs using DiceBear Avatars API
const getCartoonAvatar = (seed: string) => 
  `https://api.dicebear.com/7.x/adventurer/svg?seed=${encodeURIComponent(seed)}&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf`;

// Helper to calculate needsAttention and isOverdue for mock data
function calculateMockAttention(lastContactAt: string | undefined, frequency: ContactFrequency): { needsAttention: boolean; isOverdue: boolean } {
  if (frequency === 'none') return { needsAttention: false, isOverdue: false };
  if (!lastContactAt) return { needsAttention: true, isOverdue: true };
  
  const lastContact = new Date(lastContactAt);
  const now = new Date();
  const daysSinceContact = Math.floor((now.getTime() - lastContact.getTime()) / (1000 * 60 * 60 * 24));
  
  const frequencyConfig = FREQUENCY_OPTIONS.find(f => f.value === frequency);
  const fullThresholdDays = frequencyConfig?.days || 30;
  const warningThresholdDays = fullThresholdDays * 0.8;
  
  return {
    needsAttention: daysSinceContact >= warningThresholdDays,
    isOverdue: daysSinceContact >= fullThresholdDays,
  };
}

type RawContact = Omit<Contact, 'needsAttention' | 'isOverdue'>;

const rawMockContacts: RawContact[] = [
  // VIP Layer
  {
    id: '1',
    user_id: 'demo',
    name: 'Sarah Johnson',
    initials: 'SJ',
    avatar_url: getCartoonAvatar('sarah-johnson'),
    layer: 'vip',
    last_contact_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'weekly',
    email: 'sarah.johnson@example.com',
    phone: '+1 555-0101',
    company: 'TechCorp',
    role: 'CEO',
    notes: 'Met at Y Combinator Demo Day. Loves hiking and has two kids.',
    tags: ['Investor', 'Mentor'],
    birthday: '1985-03-15',
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '2',
    user_id: 'demo',
    name: 'David Park',
    initials: 'DP',
    avatar_url: getCartoonAvatar('david-park'),
    layer: 'vip',
    last_contact_at: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'weekly',
    email: 'david.park@example.com',
    company: 'StartupXYZ',
    role: 'Co-Founder',
    notes: 'College roommate. Wife: Emma. Has upcoming product launch next week!',
    tags: ['Friend', 'Business Partner'],
    birthday: '1988-07-22',
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '11',
    user_id: 'demo',
    name: 'Sofia Rodriguez',
    initials: 'SR',
    avatar_url: getCartoonAvatar('sofia-rodriguez'),
    layer: 'vip',
    last_contact_at: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'weekly',
    email: 'sofia.r@example.com',
    phone: '+1 555-0202',
    company: 'Innovation Labs',
    role: 'CTO',
    notes: 'Brilliant engineer. Helped architect our backend.',
    tags: ['Tech', 'Advisor', 'Friend'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '17',
    user_id: 'demo',
    name: 'Marcus Chen',
    initials: 'MC',
    avatar_url: getCartoonAvatar('marcus-chen'),
    layer: 'vip',
    last_contact_at: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'weekly',
    email: 'marcus.c@example.com',
    company: 'Angel Fund',
    role: 'Managing Partner',
    notes: 'Key investor, always helpful with intros.',
    tags: ['Investor', 'VIP'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  // Inner Layer
  {
    id: '3',
    user_id: 'demo',
    name: 'Lisa Martinez',
    initials: 'LM',
    avatar_url: getCartoonAvatar('lisa-martinez'),
    layer: 'inner',
    last_contact_at: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'biweekly',
    email: 'lisa.m@example.com',
    company: 'Design Studio',
    role: 'Creative Director',
    notes: 'Amazing designer. Referred me to 3 clients.',
    tags: ['Creative', 'Referral Partner'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '4',
    user_id: 'demo',
    name: 'Michael Chen',
    initials: 'MC',
    avatar_url: getCartoonAvatar('michael-chen'),
    layer: 'inner',
    last_contact_at: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'biweekly',
    email: 'mchen@example.com',
    company: 'Venture Capital Inc',
    role: 'Partner',
    notes: 'Interested in Series A. Plays golf every Saturday.',
    tags: ['Investor', 'VC'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '12',
    user_id: 'demo',
    name: 'Alex Turner',
    initials: 'AT',
    avatar_url: getCartoonAvatar('alex-turner'),
    layer: 'inner',
    last_contact_at: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'biweekly',
    email: 'alex.t@example.com',
    company: 'Growth Partners',
    role: 'Head of Sales',
    notes: 'Introduced me to 5 key clients. Loves wine tasting.',
    tags: ['Sales', 'Connector'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '15',
    user_id: 'demo',
    name: 'Diana Okonkwo',
    initials: 'DO',
    avatar_url: getCartoonAvatar('diana-okonkwo'),
    layer: 'inner',
    last_contact_at: new Date(Date.now() - 12 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'biweekly',
    email: 'diana.o@example.com',
    phone: '+1 555-0303',
    company: 'Startup Hub',
    role: 'Community Manager',
    notes: 'Runs the best founder community in the city.',
    tags: ['Community', 'Networking'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '18',
    user_id: 'demo',
    name: 'Jordan Blake',
    initials: 'JB',
    avatar_url: getCartoonAvatar('jordan-blake'),
    layer: 'inner',
    last_contact_at: new Date(Date.now() - 16 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'biweekly',
    email: 'jordan.b@example.com',
    company: 'Product Labs',
    role: 'VP Product',
    notes: 'Great product thinker. Kids birthday party next weekend.',
    tags: ['Product', 'Friend'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '19',
    user_id: 'demo',
    name: 'Priya Sharma',
    initials: 'PS',
    avatar_url: getCartoonAvatar('priya-sharma'),
    layer: 'inner',
    last_contact_at: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'biweekly',
    email: 'priya.s@example.com',
    company: 'Data Science Co',
    role: 'Head of AI',
    notes: 'ML expert. Helped with recommendation algorithm.',
    tags: ['Tech', 'AI'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  // Regular Layer
  {
    id: '5',
    user_id: 'demo',
    name: 'Emma Wilson',
    initials: 'EW',
    avatar_url: getCartoonAvatar('emma-wilson'),
    layer: 'regular',
    last_contact_at: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'monthly',
    email: 'emma.w@example.com',
    company: 'Marketing Pro',
    role: 'CMO',
    notes: 'Great marketing insights. Mother of 3.',
    tags: ['Marketing', 'Advisor'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '6',
    user_id: 'demo',
    name: 'James Thompson',
    initials: 'JT',
    avatar_url: getCartoonAvatar('james-thompson'),
    layer: 'regular',
    last_contact_at: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'monthly',
    email: 'james.t@example.com',
    company: 'Legal Partners LLP',
    role: 'Attorney',
    notes: 'Corporate lawyer. Helped with last funding round.',
    tags: ['Legal', 'Professional'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '13',
    user_id: 'demo',
    name: 'Maya Patel',
    initials: 'MP',
    avatar_url: getCartoonAvatar('maya-patel'),
    layer: 'regular',
    last_contact_at: new Date(Date.now() - 18 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'monthly',
    email: 'maya.p@example.com',
    company: 'FinTech Corp',
    role: 'Product Manager',
    notes: 'Smart PM. Collaborated on API integration.',
    tags: ['Product', 'Tech'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '20',
    user_id: 'demo',
    name: 'Ryan Foster',
    initials: 'RF',
    avatar_url: getCartoonAvatar('ryan-foster'),
    layer: 'regular',
    last_contact_at: new Date(Date.now() - 22 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'monthly',
    email: 'ryan.f@example.com',
    company: 'Scale Ventures',
    role: 'Associate',
    notes: 'Young VC, great energy. Running marathon next month.',
    tags: ['VC', 'Networking'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '21',
    user_id: 'demo',
    name: 'Olivia Kim',
    initials: 'OK',
    avatar_url: getCartoonAvatar('olivia-kim'),
    layer: 'regular',
    last_contact_at: new Date(Date.now() - 35 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'monthly',
    email: 'olivia.k@example.com',
    company: 'Brand Agency',
    role: 'Brand Strategist',
    notes: 'Helped with rebrand. Very creative thinker.',
    tags: ['Marketing', 'Creative'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '22',
    user_id: 'demo',
    name: 'Ethan Brooks',
    initials: 'EB',
    avatar_url: getCartoonAvatar('ethan-brooks'),
    layer: 'regular',
    last_contact_at: new Date(Date.now() - 28 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'monthly',
    email: 'ethan.b@example.com',
    company: 'CloudOps',
    role: 'DevOps Lead',
    notes: 'Infrastructure expert. Saved us during outage.',
    tags: ['Tech', 'DevOps'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  // Occasional Layer
  {
    id: '7',
    user_id: 'demo',
    name: 'Anna Kowalski',
    initials: 'AK',
    avatar_url: getCartoonAvatar('anna-kowalski'),
    layer: 'occasional',
    last_contact_at: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'quarterly',
    email: 'anna.k@example.com',
    company: 'Tech Conference',
    role: 'Event Organizer',
    notes: 'Met at SaaS Summit 2024. Speaking opportunities.',
    tags: ['Events', 'Networking'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '8',
    user_id: 'demo',
    name: 'Robert Kim',
    initials: 'RK',
    avatar_url: getCartoonAvatar('robert-kim'),
    layer: 'occasional',
    last_contact_at: new Date(Date.now() - 120 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'quarterly',
    email: 'r.kim@example.com',
    company: 'Global Enterprises',
    role: 'VP Sales',
    notes: 'Potential enterprise client. Interested in Q3.',
    tags: ['Sales', 'Enterprise'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '14',
    user_id: 'demo',
    name: 'Chris Bennett',
    initials: 'CB',
    avatar_url: getCartoonAvatar('chris-bennett'),
    layer: 'occasional',
    last_contact_at: new Date(Date.now() - 75 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'quarterly',
    email: 'chris.b@example.com',
    company: 'Media Group',
    role: 'Journalist',
    notes: 'Writes for TechCrunch. Good for PR.',
    tags: ['Media', 'PR'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '23',
    user_id: 'demo',
    name: 'Hannah Lee',
    initials: 'HL',
    avatar_url: getCartoonAvatar('hannah-lee'),
    layer: 'occasional',
    last_contact_at: new Date(Date.now() - 85 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'quarterly',
    email: 'hannah.l@example.com',
    company: 'HR Solutions',
    role: 'Recruiter',
    notes: 'Great for hiring referrals.',
    tags: ['HR', 'Recruiting'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '24',
    user_id: 'demo',
    name: 'Daniel Wright',
    initials: 'DW',
    avatar_url: getCartoonAvatar('daniel-wright'),
    layer: 'occasional',
    last_contact_at: new Date(Date.now() - 95 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'quarterly',
    email: 'daniel.w@example.com',
    company: 'Accounting Firm',
    role: 'CPA',
    notes: 'Tax advisor. Annual review coming up.',
    tags: ['Finance', 'Advisor'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '25',
    user_id: 'demo',
    name: 'Sophia Tanaka',
    initials: 'ST',
    avatar_url: getCartoonAvatar('sophia-tanaka'),
    layer: 'occasional',
    last_contact_at: new Date(Date.now() - 70 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'quarterly',
    email: 'sophia.t@example.com',
    company: 'Design Co',
    role: 'UX Designer',
    notes: 'Freelance designer. Great for projects.',
    tags: ['Design', 'Freelance'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  // Distant Layer
  {
    id: '9',
    user_id: 'demo',
    name: 'Patricia Lee',
    initials: 'PL',
    avatar_url: getCartoonAvatar('patricia-lee'),
    layer: 'distant',
    last_contact_at: new Date(Date.now() - 180 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'yearly',
    email: 'patricia.l@example.com',
    company: 'University',
    role: 'Professor',
    notes: 'Old professor. Expert in AI/ML.',
    tags: ['Academia', 'AI'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '10',
    user_id: 'demo',
    name: 'Tom Bradley',
    initials: 'TB',
    avatar_url: getCartoonAvatar('tom-bradley'),
    layer: 'distant',
    last_contact_at: new Date(Date.now() - 400 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'yearly',
    email: 'tom.b@example.com',
    company: 'Old Company',
    role: 'Former Manager',
    notes: 'Great reference. Still on LinkedIn.',
    tags: ['Reference', 'Former Colleague'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '16',
    user_id: 'demo',
    name: 'Nathan Wright',
    initials: 'NW',
    avatar_url: getCartoonAvatar('nathan-wright'),
    layer: 'distant',
    last_contact_at: new Date(Date.now() - 250 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'yearly',
    email: 'nathan.w@example.com',
    company: 'Consulting Inc',
    role: 'Senior Consultant',
    notes: 'Met at business school. Fortune 500 clients.',
    tags: ['Consulting', 'Alumni'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '26',
    user_id: 'demo',
    name: 'Rachel Green',
    initials: 'RG',
    avatar_url: getCartoonAvatar('rachel-green'),
    layer: 'distant',
    last_contact_at: new Date(Date.now() - 300 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'yearly',
    email: 'rachel.g@example.com',
    company: 'Fashion Inc',
    role: 'Buyer',
    notes: 'Old college friend. Lives in NYC now.',
    tags: ['Friend', 'Alumni'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '27',
    user_id: 'demo',
    name: 'Kevin Nguyen',
    initials: 'KN',
    avatar_url: getCartoonAvatar('kevin-nguyen'),
    layer: 'distant',
    last_contact_at: new Date(Date.now() - 350 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'yearly',
    email: 'kevin.n@example.com',
    company: 'Restaurant Group',
    role: 'Owner',
    notes: 'High school friend. Owns 3 restaurants.',
    tags: ['Friend', 'Entrepreneur'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
  {
    id: '28',
    user_id: 'demo',
    name: 'Michelle Adams',
    initials: 'MA',
    avatar_url: getCartoonAvatar('michelle-adams'),
    layer: 'distant',
    last_contact_at: new Date(Date.now() - 200 * 24 * 60 * 60 * 1000).toISOString(),
    contact_frequency: 'yearly',
    email: 'michelle.a@example.com',
    company: 'Non-Profit Org',
    role: 'Director',
    notes: 'Met at charity event. Great cause.',
    tags: ['Non-Profit', 'Networking'],
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  },
];

// Export with calculated needsAttention and isOverdue
export const mockContacts: Contact[] = rawMockContacts.map(contact => ({
  ...contact,
  ...calculateMockAttention(contact.last_contact_at, contact.contact_frequency),
}));

// Mock opportunities for demo purposes
export const mockOpportunities = [
  {
    id: 'opp-1',
    contact_id: '2',
    contact: mockContacts.find(c => c.id === '2'),
    title: "David's product launch",
    description: "His startup is launching next week. Send congratulations!",
    type: 'milestone',
    priority: 'high',
    due_date: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString(),
    is_completed: false,
    suggested_message: "Hey David! So excited about your launch next week. Wishing you all the best - let me know if there's anything I can do to help spread the word!",
  },
  {
    id: 'opp-2',
    contact_id: '1',
    contact: mockContacts.find(c => c.id === '1'),
    title: "Sarah's birthday",
    description: "Birthday on March 15th",
    type: 'birthday',
    priority: 'medium',
    due_date: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
    is_completed: false,
    suggested_message: "Happy Birthday Sarah! ðŸŽ‚ Hope you have an amazing day. Would love to catch up soon!",
  },
  {
    id: 'opp-3',
    contact_id: '18',
    contact: mockContacts.find(c => c.id === '18'),
    title: "Jordan's kid's birthday party",
    description: "Kids birthday party next weekend",
    type: 'milestone',
    priority: 'low',
    due_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
    is_completed: false,
  },
  {
    id: 'opp-4',
    contact_id: '20',
    contact: mockContacts.find(c => c.id === '20'),
    title: "Ryan's marathon",
    description: "Running his first marathon next month",
    type: 'milestone',
    priority: 'low',
    due_date: new Date(Date.now() + 25 * 24 * 60 * 60 * 1000).toISOString(),
    is_completed: false,
  },
];
